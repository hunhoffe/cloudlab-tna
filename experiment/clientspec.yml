apiVersion: v1
kind: Pod
metadata:
  name: client-REPLACE_ME_WITH_CLIENT_NUM
  namespace: REPLACE_ME_WITH_NAMESPACE
spec:
  nodeSelector:
    kubernetes.io/hostname: REPLACE_ME_WITH_NODE
  containers:
  - name: client-REPLACE_ME_WITH_CLIENT_NUM
    image: hunhoffe/pkb-netperf
    imagePullPolicy: Always
    command: ["/bin/bash", "-c", "/opt/pkb/netperf-netperf-2.7.0/src/netperf -p 20000 -j -v2 -t TCP_RR -H REPLACE_ME_WITH_SERVER_IP -l 60 -- -P ,20001 -o THROUGHPUT,THROUGHPUT_UNITS,P50_LATENCY,P90_LATENCY,P99_LATENCY,STDDEV_LATENCY,MIN_LATENCY,MAX_LATENCY,CONFIDENCE_ITERATION,THROUGHPUT_CONFID,LOCAL_TRANSPORT_RETRANS,REMOTE_TRANSPORT_RETRANS,TRANSPORT_MSS; echo NETPERF_DONE; sleep infinity"]
